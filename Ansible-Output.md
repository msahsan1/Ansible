<pre>
<h2> Register to use variable value </h2>

mahsan@vmmint:~/Ansible$ cat 02-playbook.yml 
---
- hosts: dev
  tasks:
    - name: Execute Shell Commands
      shell: uname -r
      register: uname_result
    - debug: msg="{{ uname_result.stdout }}"
mahsan@vmmint:~/Ansible$ ansible-playbook 02-playbook.yml 

PLAY [dev] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.136.20.35]
ok: [3.128.31.109]

TASK [Execute Shell Commands] ****************************************************************************************************************************************************************************
changed: [3.145.59.98]
changed: [3.136.20.35]
changed: [3.128.31.109]

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}
ok: [3.128.31.109] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}
ok: [3.136.20.35] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}

PLAY RECAP ***********************************************************************************************************************************************************************************************
3.128.31.109               : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.136.20.35                : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.145.59.98                : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

mahsan@vmmint:~/Ansible$ 

<h2> Use variable files for variable </h2>


ahsan@vmmint:~/Ansible$ cat 03-ansible_variable.yml 
---
- hosts: dev
  vars_files:
    - variables.yml
  vars:
    variable1: "PlayBookValue"
    variable2: "PlayBookValue"
  tasks:
    - name: Variable Value
      debug: msg="Value is {{ variable1 }}"
    
    - name: Variable Value
      debug: msg="Value is {{ variable2 }}"
mahsan@vmmint:~/Ansible$ cat variables.yml 
variable1: "Variables YAML Value"
variable2: "Variables JSON  Value"
mahsan@vmmint:~/Ansible$ ansible-playbook 03-ansible_variable.yml 

PLAY [dev] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.136.20.35]
ok: [3.128.31.109]

TASK [Variable Value] ************************************************************************************************************************************************************************************
ok: [3.128.31.109] => {
    "msg": "Value is Variables YAML Value"
}
ok: [3.145.59.98] => {
    "msg": "Value is Variables YAML Value"
}
ok: [3.136.20.35] => {
    "msg": "Value is Variables YAML Value"
}

TASK [Variable Value] ************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "Value is Variables JSON  Value"
}
ok: [3.128.31.109] => {
    "msg": "Value is Variables JSON  Value"
}
ok: [3.136.20.35] => {
    "msg": "Value is Variables JSON  Value"
}

PLAY RECAP ***********************************************************************************************************************************************************************************************
3.128.31.109               : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.136.20.35                : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.145.59.98                : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


<h2> Ansible Facts </h2>


ahsan@vmmint:~/Ansible$ cat 04-ansible_facys.yml 
---
- hosts: dev
  tasks:
    - name: Kernel
      debug: msg="{{ ansible_kernel }}"
    - name: Hostname
      debug: msg="{{ ansible_hostname }}"
    - name: Distribution
      debug: msg="{{ ansible_distribution }}"
    - debug: var=ansible_architecture
    - debug: var=inventory_hostname
    - debug: var=groups
    - debug: var=group_names
mahsan@vmmint:~/Ansible$ ansible-playbook 04-ansible_facys.yml 

PLAY [dev] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.136.20.35]
ok: [3.128.31.109]

TASK [Kernel] ********************************************************************************************************************************************************************************************
ok: [3.128.31.109] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}
ok: [3.145.59.98] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}
ok: [3.136.20.35] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}

TASK [Hostname] ******************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "ip-172-31-12-8"
}
ok: [3.136.20.35] => {
    "msg": "ip-172-31-4-65"
}
ok: [3.128.31.109] => {
    "msg": "ip-172-31-2-196"
}

TASK [Distribution] **************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "Amazon"
}
ok: [3.128.31.109] => {
    "msg": "Amazon"
}
ok: [3.136.20.35] => {
    "msg": "Amazon"
}

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "ansible_architecture": "x86_64"
}
ok: [3.128.31.109] => {
    "ansible_architecture": "x86_64"
}
ok: [3.136.20.35] => {
    "ansible_architecture": "x86_64"
}

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.128.31.109] => {
    "inventory_hostname": "3.128.31.109"
}
ok: [3.136.20.35] => {
    "inventory_hostname": "3.136.20.35"
}
ok: [3.145.59.98] => {
    "inventory_hostname": "3.145.59.98"
}

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "groups": {
        "all": [
            "3.145.59.98",
            "3.128.31.109",
            "3.136.20.35"
        ],
        "dev": [
            "3.145.59.98",
            "3.128.31.109",
            "3.136.20.35"
        ],
        "ungrouped": []
    }
}
ok: [3.128.31.109] => {
    "groups": {
        "all": [
            "3.145.59.98",
            "3.128.31.109",
            "3.136.20.35"
        ],
        "dev": [
            "3.145.59.98",
            "3.128.31.109",
            "3.136.20.35"
        ],
        "ungrouped": []
    }
}
ok: [3.136.20.35] => {
    "groups": {
        "all": [
            "3.145.59.98",
            "3.128.31.109",
            "3.136.20.35"
        ],
        "dev": [
            "3.145.59.98",
            "3.128.31.109",
            "3.136.20.35"
        ],
        "ungrouped": []
    }
}

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "group_names": [
        "dev"
    ]
}
ok: [3.128.31.109] => {
    "group_names": [
        "dev"
    ]
}
ok: [3.136.20.35] => {
    "group_names": [
        "dev"
    ]
}

PLAY RECAP ***********************************************************************************************************************************************************************************************
3.128.31.109               : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.136.20.35                : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.145.59.98                : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

mahsan@vmmint:~/Ansible$ 


<h2> Install Apache server using Ansible playbook </h2>

ahsan@vmmint:~/Ansible$ cat 05-ansible-httpd.yml 
---
- hosts: dev
  become: true
  tasks:
    - dnf:
        name:
          - httpd
        state: present
    - service: name=httpd state=started enabled=yes
    - raw: "echo CopyRight by MSA 2023 all right reserved | sudo tee /var/www/html/index.html"
mahsan@vmmint:~/Ansible$ 

mahsan@vmmint:~/Ansible$ ansible-playbook 05-ansible-httpd.yml 

PLAY [dev] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.136.20.35]
ok: [3.145.59.98]
ok: [3.128.31.109]

TASK [dnf] ***********************************************************************************************************************************************************************************************
changed: [3.128.31.109]
changed: [3.145.59.98]
changed: [3.136.20.35]

TASK [service] *******************************************************************************************************************************************************************************************
changed: [3.136.20.35]
changed: [3.128.31.109]
changed: [3.145.59.98]

TASK [raw] ***********************************************************************************************************************************************************************************************
changed: [3.145.59.98]
changed: [3.128.31.109]
changed: [3.136.20.35]

PLAY RECAP ***********************************************************************************************************************************************************************************************
3.128.31.109               : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.136.20.35                : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.145.59.98                : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

mahsan@vmmint:~/Ansible$ curl 3.136.20.35
CopyRight by MSA 2023 all right reserved
mahsan@vmmint:~/Ansible$ curl 3.128.31.109
CopyRight by MSA 2023 all right reserved
mahsan@vmmint:~/Ansible$ curl 3.145.59.98
CopyRight by MSA 2023 all right reserved


<h2> Play all Ansible at once </h2>


mahsan@vmmint:~/Ansible/playbooks$ cat 06-ansible_play_all.yml 
- import_playbook:  01-ping.yml
- import_playbook:  02-register_variable.yml
- import_playbook:  03-ansible_variable.yml

ahsan@vmmint:~/Ansible/playbooks$ ansible-playbook 06-ansible_play_all.yml 

PLAY [all] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.128.31.109]
ok: [3.136.20.35]

TASK [Ping All Servers] **********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.136.20.35]
ok: [3.128.31.109]

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "Hello"
}
ok: [3.128.31.109] => {
    "msg": "Hello"
}
ok: [3.136.20.35] => {
    "msg": "Hello"
}

PLAY [dev] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.128.31.109]
ok: [3.136.20.35]

TASK [Execute Shell Commands] ****************************************************************************************************************************************************************************
changed: [3.145.59.98]
changed: [3.136.20.35]
changed: [3.128.31.109]

TASK [debug] *********************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}
ok: [3.128.31.109] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}
ok: [3.136.20.35] => {
    "msg": "6.1.49-70.116.amzn2023.x86_64"
}

PLAY [dev] ***********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************************************************************
ok: [3.145.59.98]
ok: [3.136.20.35]
ok: [3.128.31.109]

TASK [Variable Value] ************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "Value is Variables YAML Value"
}
ok: [3.128.31.109] => {
    "msg": "Value is Variables YAML Value"
}
ok: [3.136.20.35] => {
    "msg": "Value is Variables YAML Value"
}

TASK [Variable Value] ************************************************************************************************************************************************************************************
ok: [3.145.59.98] => {
    "msg": "Value is Variables JSON  Value"
}
ok: [3.128.31.109] => {
    "msg": "Value is Variables JSON  Value"
}
ok: [3.136.20.35] => {
    "msg": "Value is Variables JSON  Value"
}

PLAY RECAP ***********************************************************************************************************************************************************************************************
3.128.31.109               : ok=9    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.136.20.35                : ok=9    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
3.145.59.98                : ok=9    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

mahsan@vmmint:~/Ansible/playbooks$ ansible-playbook 06-ansible_play_all.yml --list-tasks

playbook: 06-ansible_play_all.yml

  play #1 (all): all	TAGS: []
    tasks:
      Ping All Servers	TAGS: []
      debug	TAGS: []

  play #2 (dev): dev	TAGS: []
    tasks:
      Execute Shell Commands	TAGS: []
      debug	TAGS: []

  play #3 (dev): dev	TAGS: []
    tasks:
      Variable Value	TAGS: []
      Variable Value	TAGS: []
mahsan@vmmint:~/Ansible/playbooks$ ansible-playbook 06-ansible_play_all.yml --list-hosts

playbook: 06-ansible_play_all.yml

  play #1 (all): all	TAGS: []
    pattern: ['all']
    hosts (3):
      3.128.31.109
      3.136.20.35
      3.145.59.98

  play #2 (dev): dev	TAGS: []
    pattern: ['dev']
    hosts (3):
      3.128.31.109
      3.136.20.35
      3.145.59.98

  play #3 (dev): dev	TAGS: []
    pattern: ['dev']
    hosts (3):
      3.128.31.109
      3.136.20.35
      3.145.59.98
mahsan@vmmint:~/Ansible/playbooks$ cat 06-ansible_play_all.yml 
- import_playbook:  01-ping.yml
- import_playbook:  02-register_variable.yml
- import_playbook:  03-ansible_variable.yml
mahsan@vmmint:~/Ansible/playbooks$ 




</pre>

